<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><mapper namespace="com.r2cf.interactiveweb.dao.CustUserDao">	<resultMap id="BaseResultMap" type="com.r2cf.entity.CustUserBean">		<id column="id" property="id" jdbcType="BIGINT" />		<result property="phone" column="phone" jdbcType="VARCHAR"/>		<result property="password" column="password" jdbcType="VARCHAR"/>		<result property="name" column="name" jdbcType="VARCHAR"/>		<result property="email" column="email" jdbcType="VARCHAR"/>		<result property="headPortrait" column="head_portrait" jdbcType="VARCHAR"/>		<result property="createTime" column="create_time" jdbcType="DATE"/>		<result property="isDelete" column="is_delete" jdbcType="CHAR"/>		<result property="remark" column="remark" jdbcType="VARCHAR"/>		<result property="isEmail" column="is_email" jdbcType="CHAR"/>	</resultMap>    
	<select id="getCustUser" parameterType="java.util.Map"  resultMap="BaseResultMap">		SELECT			id,			phone,			password,			name,			email,			create_time,			head_portrait		FROM			t_cust_user		WHERE			phone = #{phone}		AND 			password = #{password}		AND			is_delete='N'		</select>		<select id="getCustUserByPhone" parameterType="string" resultMap="BaseResultMap">		SELECT			id,            phone,            password,            name,            email,            create_time,            head_portrait,            is_delete,            is_email,            last_company_by		FROM			t_cust_user		WHERE			phone = #{phone}		AND			is_delete='N'	</select>    <update id="updateCustUserPwd" parameterType="java.lang.String">		UPDATE		  t_cust_user		SET		  password = #{newPassword}		WHERE		  phone = #{phone}    </update>        <update id="updateUserLastCompamyBy" parameterType="map" >    	UPDATE		  t_cust_user		SET		  last_company_by = #{companyId}		WHERE		  id = #{userId}    </update>        <select id="getCusetUserById" parameterType="int" resultMap="BaseResultMap">    	SELECT			name		FROM			t_cust_user		WHERE			id = #{userId}		AND			is_delete='N'    </select>
    <select id="getUserNameById" parameterType="long" resultType="java.lang.String">    	SELECT			NAME		FROM			t_cust_user		WHERE			id = #{userId}		AND is_delete = 'N'    </select>    <update id="updateCustUser" parameterType="Map" >        UPDATE t_cust_user         <set>            <if test="newPhone != null and newPhone!='' ">                phone=#{newPhone},            </if>            <if test="newPassword !=null and newPassword!='' ">                password=#{newPassword},            </if>            <if test="newEmail !=null and newEmail!='' ">                email=#{newEmail},            </if>            <if test="isEmail != null and isEmail!='' ">                is_email=#{isEmail},            </if>        </set>        WHERE id=#{id}    </update>     <update id="updateCustUserHeadImage" parameterType="Map" >    	 update t_cust_user set head_portrait=#{headPortrait} where id=#{userId} and is_delete='N'     </update>     <select id="getCustUserById" parameterType="java.lang.Long" resultMap="BaseResultMap">        SELECT		    id,		    phone,		    PASSWORD,		    NAME,		    email,		    is_email,		    last_company_by,		    create_time,		    head_portrait,		    is_delete        FROM            t_cust_user        WHERE            id = #{id}         </select>     <select id="listUserByEmail" parameterType="string" resultMap="BaseResultMap">     	  SELECT		    id        FROM            t_cust_user        WHERE           	email=#{email}         AND         	is_delete='N'       </select>
</mapper>